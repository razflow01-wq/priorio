<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Priorio</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#1e3c72,#6a11cb,#e52d27);
  color: white;
  min-height: 100vh;
}

#app {
  display: flex;
  min-height: 100vh;
}

nav {
  width: 220px;
  background: rgba(0,0,0,0.3);
  padding: 20px;
}

nav h2 {
  margin-top: 0;
}

nav button {
  width: 100%;
  margin: 8px 0;
  padding: 12px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
}

main {
  flex: 1;
  padding: 40px;
}

.section {
  display: none;
}

.section.active {
  display: block;
}

input {
  padding: 12px;
  width: 100%;
  border-radius: 10px;
  border: none;
  margin-bottom: 10px;
}

button.primary {
  background: white;
  color: black;
}

.card {
  background: rgba(255,255,255,0.15);
  padding: 20px;
  border-radius: 15px;
  margin-bottom: 20px;
}
</style>
</head>

<body>

<!-- AUTH -->
<div id="auth" style="display:flex;justify-content:center;align-items:center;height:100vh;">
  <div class="card" style="width:400px;">
    <h1>Priorio</h1>
    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="Mot de passe">
    <button class="primary" onclick="register()">CrÃ©er un compte</button>
    <button onclick="login()">Se connecter</button>
    <button onclick="loginWithGoogle()">Google</button>
    <p id="error"></p>
  </div>
</div>

<!-- APP -->
<div id="app" style="display:none;">
  <nav>
    <h2>Priorio</h2>
    <button onclick="show('today')">ğŸ§  Aujourdâ€™hui</button>
    <button onclick="show('tasks')">ğŸ“‹ TÃ¢ches</button>
    <button onclick="show('profile')">ğŸ‘¤ Profil</button>
    <button onclick="show('settings')">âš™ï¸ ParamÃ¨tres</button>
    <button onclick="logout()">ğŸšª DÃ©connexion</button>
  </nav>

  <main>
    <div id="today" class="section active">
      <h1>Aujourdâ€™hui</h1>
      <input id="taskInput" placeholder="Ã‰cris tout ce qui te passe par la tÃªteâ€¦">
      <button class="primary" onclick="addTask()">Ajouter</button>
      <ul id="taskList"></ul>
    </div>

    <div id="tasks" class="section">
      <h1>Toutes les tÃ¢ches</h1>
      <p>BientÃ´t disponible</p>
    </div>

    <div id="profile" class="section">
      <h1>Mon profil</h1>
      <div class="card">
        <p><strong>Email :</strong> <span id="profileEmail"></span></p>
        <p><strong>ID :</strong> <span id="profileUid"></span></p>
      </div>
    </div>

    <div id="settings" class="section">
      <h1>ParamÃ¨tres</h1>
      <p>Version 1.1</p>
    </div>
  </main>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, onAuthStateChanged, createUserWithEmailAndPassword, signInWithEmailAndPassword, signInWithPopup, GoogleAuthProvider, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyD7Bstrypdg-Xgy1K1XeCuFVKJBNkAKPBU",
  authDomain: "priorio-e8ca2.firebaseapp.com",
  projectId: "priorio-e8ca2",
  appId: "1:907107431858:web:cf07bf003c1cee116c60ab"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

const authDiv = document.getElementById("auth");
const appDiv = document.getElementById("app");

onAuthStateChanged(auth, user => {
  if (user) {
    authDiv.style.display = "none";
    appDiv.style.display = "flex";
    profileEmail.textContent = user.email;
    profileUid.textContent = user.uid;
  } else {
    authDiv.style.display = "flex";
    appDiv.style.display = "none";
  }
});

window.register = () => createUserWithEmailAndPassword(auth,email.value,password.value).catch(e=>error.textContent=e.message);
window.login = () => signInWithEmailAndPassword(auth,email.value,password.value).catch(e=>error.textContent=e.message);
window.loginWithGoogle = () => signInWithPopup(auth,provider).catch(e=>error.textContent=e.message);
window.logout = () => signOut(auth);

window.show = id => {
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
};

window.addTask = () => {
  if (!taskInput.value) return;
  const li = document.createElement("li");
  li.textContent = taskInput.value;
  taskList.appendChild(li);
  taskInput.value = "";
};
</script>

</body>
</html>





