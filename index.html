<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Priorio</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg,#1e3c72,#6a11cb,#e52d27);
  color: white;
  min-height: 100vh;
}

#auth, #app {
  display: none;
}

#auth {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
}

.card {
  background: rgba(255,255,255,0.15);
  padding: 30px;
  border-radius: 20px;
  width: 100%;
  max-width: 400px;
}

input {
  width: 100%;
  padding: 12px;
  margin-bottom: 10px;
  border-radius: 10px;
  border: none;
}

button {
  padding: 12px;
  margin-bottom: 10px;
  width: 100%;
  border-radius: 10px;
  border: none;
  cursor: pointer;
}

.primary {
  background: white;
  color: black;
}

nav {
  width: 220px;
  background: rgba(0,0,0,0.3);
  padding: 20px;
}

nav button {
  margin-bottom: 10px;
}

#app {
  display: flex;
  min-height: 100vh;
}

main {
  flex: 1;
  padding: 30px;
}

.section {
  display: none;
}

.section.active {
  display: block;
}

ul {
  padding-left: 20px;
}
</style>
</head>

<body>

<!-- AUTH -->
<div id="auth">
  <div class="card">
    <h1>Priorio</h1>
    <p>Concentre-toi sur l‚Äôessentiel</p>

    <input id="email" type="email" placeholder="Email">
    <input id="password" type="password" placeholder="Mot de passe (6 caract√®res min)">

    <button class="primary" onclick="register()">Cr√©er un compte</button>
    <button onclick="login()">Se connecter</button>
    <button onclick="loginWithGoogle()">Google</button>

    <p id="error"></p>
  </div>
</div>

<!-- APP -->
<div id="app">
  <nav>
    <h2>Priorio</h2>
    <button onclick="showSection('today')">üß† Aujourd‚Äôhui</button>
    <button onclick="showSection('profile')">üë§ Profil</button>
    <button onclick="showSection('settings')">‚öôÔ∏è Param√®tres</button>
    <button onclick="logout()">üö™ D√©connexion</button>
  </nav>

  <main>
    <!-- TODAY -->
    <div id="today" class="section active">
      <h1>Aujourd‚Äôhui</h1>
      <input id="taskInput" placeholder="√âcris tout ce qui te passe par la t√™te‚Ä¶">
      <button class="primary" onclick="addTask()">Ajouter</button>
      <ul id="taskList"></ul>
    </div>

    <!-- PROFILE -->
    <div id="profile" class="section">
      <h1>Mon profil</h1>

      <div class="card">
        <p><strong>Email :</strong> <span id="pEmail"></span></p>
        <p><strong>ID :</strong> <span id="pUid"></span></p>
        <p><strong>Connexion :</strong> <span id="pProvider"></span></p>
        <p><strong>Cr√©√© le :</strong> <span id="pDate"></span></p>
      </div>

      <div class="card">
        <h3>Mon objectif personnel</h3>
        <input id="goalInput" placeholder="Ex : Me concentrer chaque jour">
        <button class="primary" onclick="saveGoal()">Enregistrer</button>
      </div>
    </div>

    <!-- SETTINGS -->
    <div id="settings" class="section">
      <h1>Param√®tres</h1>

      <div class="card">
        <button class="primary" onclick="resetDay()">R√©initialiser la journ√©e</button>
      </div>

      <div class="card">
        <p>Version : 1.1</p>
        <p>Priorio ¬© 2025</p>
      </div>
    </div>
  </main>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getAuth,
  onAuthStateChanged,
  createUserWithEmailAndPassword,
  signInWithEmailAndPassword,
  signInWithPopup,
  GoogleAuthProvider,
  signOut
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyD7Bstrypdg-Xgy1K1XeCuFVKJBNkAKPBU",
  authDomain: "priorio-e8ca2.firebaseapp.com",
  projectId: "priorio-e8ca2",
  appId: "1:907107431858:web:cf07bf003c1cee116c60ab"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

const authDiv = document.getElementById("auth");
const appDiv = document.getElementById("app");

onAuthStateChanged(auth, user => {
  if (user) {
    authDiv.style.display = "none";
    appDiv.style.display = "flex";

    pEmail.textContent = user.email;
    pUid.textContent = user.uid;
    pProvider.textContent = user.providerData[0].providerId;
    pDate.textContent = new Date(user.metadata.creationTime).toLocaleDateString();

    goalInput.value = localStorage.getItem("goal") || "";
  } else {
    authDiv.style.display = "flex";
    appDiv.style.display = "none";
  }
});

window.register = () =>
  createUserWithEmailAndPassword(auth, email.value, password.value)
    .catch(e => error.textContent = e.message);

window.login = () =>
  signInWithEmailAndPassword(auth, email.value, password.value)
    .catch(e => error.textContent = e.message);

window.loginWithGoogle = () =>
  signInWithPopup(auth, provider)
    .catch(e => error.textContent = e.message);

window.logout = () => signOut(auth);

window.showSection = id => {
  document.querySelectorAll(".section").forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
};

window.addTask = () => {
  if (!taskInput.value) return;
  const li = document.createElement("li");
  li.textContent = taskInput.value;
  taskList.appendChild(li);
  taskInput.value = "";
};

window.saveGoal = () => {
  localStorage.setItem("goal", goalInput.value);
  alert("Objectif enregistr√©");
};

window.resetDay = () => {
  if (confirm("R√©initialiser la journ√©e ?")) {
    taskList.innerHTML = "";
  }
};
</script>

</body>
</html>






